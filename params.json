{
  "name": "CNAB Layouts Parser",
  "tagline": "Parser de arquivos de configuração CNAB (layouts) gerados no projeto http://glauberportella.github.io/cnab-layouts/",
  "body": "[![Build Status](https://travis-ci.org/glauberportella/cnab-layouts-parser.svg?branch=master)](https://travis-ci.org/glauberportella/cnab-layouts-parser) [![Code Climate](https://codeclimate.com/github/glauberportella/cnab-layouts-parser/badges/gpa.svg)](https://codeclimate.com/github/glauberportella/cnab-layouts-parser)\r\n\r\n# CNAB LAYOUTS PARSER\r\n\r\n# Usando o Parser\r\n\r\n**Obs.:** Execute `composer install` para instalar as dependências.\r\n\r\n# Exemplos\r\n\r\n## Arquivo de Remessa\r\n\r\nGerando um arquivo Remessa CNAB240:\r\n\r\n```php\r\n<?php \r\nrequire_once __DIR__.'/vendor/autoload.php';\r\n\r\nuse CnabParser\\Parser\\Layout;\r\nuse CnabParser\\Model\\Remessa;\r\nuse CnabParser\\Output\\RemessaFile;\r\n\r\n$remessaLayout = new Layout(__DIR__.'/config/itau/cnab240/cobranca_bloqueto.yml');\r\n$remessa = new Remessa($remessaLayout);\r\n\r\n// header arquivo\r\n$remessa->header->codigo_banco = 341;\r\n$remessa->header->tipo_inscricao = 2;\r\n$remessa->header->inscricao_numero = '05346078000186';\r\n$remessa->header->agencia = 2932;\r\n$remessa->header->conta = 24992;\r\n$remessa->header->dac = 9;\r\n$remessa->header->nome_empresa = 'MACWEB SOLUTIONS LTDA';\r\n$remessa->header->data_geracao = date('dmY');\r\n$remessa->header->hora_geracao = date('His');\r\n$remessa->header->numero_sequencial_arquivo_retorno = 1;\r\n\r\n// criar um novo lote de serviço para a remessa\r\n// informando o código sequencial do lote\r\n$lote = $remessa->novoLote(1);\r\n\r\n$lote->header->codigo_banco = 341;\r\n$lote->header->lote_servico = $lote->sequencial;\r\n$lote->header->tipo_registro = 1;\r\n$lote->header->tipo_operacao = 'R';\r\n$lote->header->tipo_servico = '01';\r\n$lote->header->zeros_01 = 0;\r\n$lote->header->versao_layout_lote = '030';\r\n$lote->header->brancos_01 = '';\r\n$lote->header->tipo_inscricao = 2;\r\n$lote->header->inscricao_empresa = '05346078000186';\r\n$lote->header->brancos_02 = '0';\r\n$lote->header->zeros_02 = 0;\r\n$lote->header->agencia = 2932;\r\n$lote->header->brancos_03 = '';\r\n$lote->header->zeros_03 = 0;\r\n$lote->header->conta = '24992';\r\n$lote->header->brancos_04 = '';\r\n$lote->header->dac = 9;\r\n$lote->header->nome_empresa = 'MACWEB SOLUTIONS LTDA';\r\n$lote->header->brancos_05 = '';\r\n$lote->header->numero_sequencial_arquivo_retorno = 1;\r\n$lote->header->data_gravacao = date('dmY');\r\n$lote->header->data_credito = date('dmY');\r\n$lote->header->brancos_06 = '';\r\n\r\n$detalhe = $lote->novoDetalhe();\r\n// segmento p\r\n$detalhe->segmento_p->lote_servico = $lote->sequencial;\r\n$detalhe->segmento_p->nummero_sequencial_registro_lote = 1;\r\n$detalhe->segmento_p->codigo_ocorrencia = '01';\r\n$detalhe->segmento_p->agencia = 2932;\r\n$detalhe->segmento_p->conta = 24992;\r\n$detalhe->segmento_p->dac = 9;\r\n$detalhe->segmento_p->carteira = 109;\r\n$detalhe->segmento_p->nosso_numero = 12345678;\r\n$detalhe->segmento_p->dac_nosso_numero = 3;\r\n$detalhe->segmento_p->numero_documento = 1;\r\n$detalhe->segmento_p->vencimento = '10052016';\r\n$detalhe->segmento_p->valor_titulo = 1000;\r\n$detalhe->segmento_p->agencia_cobradora = 0;\r\n$detalhe->segmento_p->dac_agencia_cobradora = 0;\r\n$detalhe->segmento_p->especie = '05';\r\n$detalhe->segmento_p->aceite = 'N';\r\n$detalhe->segmento_p->data_emissao = date('dmY');\r\n$detalhe->segmento_p->data_juros_mora = '11052016';\r\n$detalhe->segmento_p->juros_1_dia = 0;\r\n$detalhe->segmento_p->data_1o_desconto = '00000000';\r\n$detalhe->segmento_p->valor_1o_desconto = 0;\r\n$detalhe->segmento_p->valor_iof = 38;\r\n$detalhe->segmento_p->valor_abatimento = 0;\r\n$detalhe->segmento_p->identificacao_titulo_empresa = '';\r\n$detalhe->segmento_p->codigo_negativacao_protesto = 0;\r\n$detalhe->segmento_p->prazo_negativacao_protesto = 0;\r\n$detalhe->segmento_p->codigo_baixa = 0;\r\n$detalhe->segmento_p->prazo_baixa = 0;\r\n// segmento q\r\n$detalhe->segmento_q->lote_servico = $lote->sequencial;\r\n$detalhe->segmento_q->nummero_sequencial_registro_lote = 2;\r\n$detalhe->segmento_q->codigo_ocorrencia = '01';\r\n$detalhe->segmento_q->tipo_inscricao = 2;\r\n$detalhe->segmento_q->inscricao_numero = '05346078000186';\r\n$detalhe->segmento_q->nome_pagador = 'GLAUBER PORTELLA';\r\n$detalhe->segmento_q->logradouro = 'RUA ALVARENGA';\r\n$detalhe->segmento_q->bairro = 'GUARANI';\r\n$detalhe->segmento_q->cep = 31814;\r\n$detalhe->segmento_q->sufixo_cep = 500;\r\n$detalhe->segmento_q->cidade = 'BELO HORIZONTE';\r\n$detalhe->segmento_q->uf = 'MG';\r\n$detalhe->segmento_q->tipo_inscricao_sacador = 2;\r\n$detalhe->segmento_q->inscricao_sacador = '05346078000186';\r\n$detalhe->segmento_q->nome_sacador = 'MACWEB SOLUTIONS LTDA';\r\n// segmento r opcional nao adicionado\r\nunset($detalhe->segmento_r);\r\n// segmento y opcional nao adicionado\r\nunset($detalhe->segmento_y);\r\n// insere o detalhe no lote da remessa\r\n$lote->inserirDetalhe($detalhe);\r\n\r\n// trailer lote\r\n$lote->trailer->lote_servico = $lote->sequencial;\r\n$lote->trailer->quantidade_registros_lote = 4; // quantidade de Registros do Lote correspondente à soma da quantidade dos registros tipo 1 (header_lote), 3(detalhes) e 5(trailer_lote)\r\n$lote->trailer->quantidade_cobranca_simples = 1;\r\n$lote->trailer->valor_total_cobranca_simples = 10000;\r\n$lote->trailer->quantidade_cobranca_vinculada = 0;\r\n$lote->trailer->valor_total_cobranca_vinculada = 0;\r\n$lote->trailer->aviso_bancario = '00000000';\r\n// inserir lote na remessa\r\n$remessa->inserirLote($lote);\r\n\r\n// trailer arquivo\r\n$remessa->trailer->total_lotes = 1; // quantidade de Lotes do arquivo correspondente à soma da quantidade dos registros tipo 1 (header_lote).\r\n$remessa->trailer->total_registros = 6; //total da quantidade de Registros no arquivo correspondente à soma da quantidade dos registros tipo 0(header_arquivo), 1(header_lote), 3(detalhes), 5(trailer_lote) e 9(trailer_arquivo).\r\n\r\n// gera arquivo\r\n$remessaFile = new RemessaFile($remessa);\r\n$remessaFile->generate(__DIR__.'/tests/out/itaucobranca240.rem');\r\n```\r\n\r\n## Retorno\r\n\r\nProcessando um arquivo de retorno transformando-o em modelo para uso em seu sistema.\r\n\r\n```php\r\n<?php\r\nrequire_once __DIR__.'/vendor/autoload.php';\r\n\r\nuse CnabParser\\Parser\\Layout;\r\nuse CnabParser\\Model\\Retorno;\r\nuse CnabParser\\Input\\RetornoFile;\r\n\r\n$layout = new Layout(__DIR__.'/config/itau/cnab240/cobranca_bloqueto.yml');\r\n$retornoFile = new RetornoFile($layout, __DIR__.'/data/cobranca-itau-cnab240.ret');\r\n\r\n// Gera o objeto instancia de CnabParser\\Model\\Retorno com os dados do arquivo de retorno processado\r\n$retorno = $retornoFile->generate();\r\n\r\n// ... utilize o $retorno em seu sistema para verificações, etc. ...\r\n```\r\n\r\n# Licença\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2016 Glauber Portella <glauberportella@gmail.com>\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of\r\nthis software and associated documentation files (the \"Software\"), to deal in\r\nthe Software without restriction, including without limitation the rights to\r\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\r\nthe Software, and to permit persons to whom the Software is furnished to do so,\r\nsubject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\r\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\r\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\r\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}